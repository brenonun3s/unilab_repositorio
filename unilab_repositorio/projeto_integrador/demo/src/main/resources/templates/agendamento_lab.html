<!-- Código desenvolvido por Rafael V. Gogge -->
<!-- Direitos reservados © 2025 -->
<!-- GitHub: https://github.com/RafaelGogge -->
<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Rafael V. Gogge">
  <meta name="copyright" content="© 2025 Rafael V. Gogge">
  <meta name="description" content="Sistema de agendamento de laboratórios - UniLab">
  <title>Agendamento - Laboratório</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/agendamento_lab.css}" />
  <!-- Favicon -->
  <link rel="shortcut icon" th:href="@{/favicon/favicon.ico}" type="image/x-icon" />
</head>

<body class="min-h-screen bg-gradient-to-br from-primary to-secondary text-white">
<!-- Skip Link para Acessibilidade -->
<a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>

<!-- Overlay de Seleção de Laboratório -->
<div id="labSelectionOverlay" class="lab-selection-overlay opacity-0 translate-y-10">
  <div class="lab-selection-container">
    <div class="lab-selection-header">
      <h2 class="text-center mb-4">
        <i class="bi bi-building"></i> Selecione um Laboratório
      </h2>
      <p class="text-center text-white-70 mb-5">
        Escolha o laboratório que deseja agendar
      </p>
    </div>
    <div id="labSelectionGrid" class="lab-selection-grid">
      <!-- Os laboratórios serão carregados aqui via JavaScript -->
    </div>
    <div class="lab-selection-footer mt-4 text-center">
      <button class="btn-voltar" th:onclick="|window.location.href='@{/main/seja-bem-vindo}'|">
        <i class="bi bi-arrow-left"></i> Voltar para o Dashboard
      </button>
    </div>
  </div>
</div>

<!-- Conteúdo Principal -->
<main id="main-content" class="container py-4 opacity-0">
  <div
          class="login-container bg-white/10 backdrop-blur-md rounded-3xl p-6 md:p-8 shadow-2xl border border-white/10 w-full max-w-4xl">
    <div class="login-title flex items-center gap-4 mb-6 pb-4 border-b border-white/20">
      <button class="btn-voltar" th:onclick="|window.location.href='@{/main/seja-bem-vindo}'|"
              aria-label="Voltar para a página anterior">
        <i class="bi bi-arrow-left"></i>
      </button>
      <span class="text-2xl font-semibold text-white flex-1" id="labTitle">Agendamento: Laboratório</span>
      <button class="btn-change-lab" onclick="showLabSelectionOverlay()" aria-label="Trocar laboratório">
        <i class="bi bi-shuffle"></i> Trocar
      </button>
    </div>

    <!-- Informações do Laboratório -->
    <div class="lab-details-container fade-in-element" data-delay="100">
      <h3 class="lab-details-title">
        <i class="bi bi-info-circle"></i> Informações do Laboratório
      </h3>
      <div class="lab-details-grid">
        <div class="lab-detail-item">
          <i class="bi bi-geo-alt"></i>
          <div class="detail-content">
            <span class="detail-label">Localização:</span>
            <span class="detail-value" id="labLocalizacao">Carregando...</span>
          </div>
        </div>
        <div class="lab-detail-item">
          <i class="bi bi-pc-display"></i>
          <div class="detail-content">
            <span class="detail-label">Tipo:</span>
            <span class="detail-value" id="labTipo">Carregando...</span>
          </div>
        </div>
        <div class="lab-detail-item">
          <i class="bi bi-people"></i>
          <div class="detail-content">
            <span class="detail-label">Capacidade:</span>
            <span class="detail-value" id="labCapacidade">Carregando...</span>
          </div>
        </div>
        <div class="lab-detail-item">
          <i class="bi bi-circle-fill status-icon"></i>
          <div class="detail-content">
            <span class="detail-label">Status:</span>
            <span class="detail-value" id="labStatus">Carregando...</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Formulário de Agendamento -->
    <div class="form-container fade-in-element" data-delay="200">
      <!-- Campo para o Nome do Professor -->
      <div class="form-group">
        <label for="nomeProfessor" class="form-label">
          <i class="bi bi-person-badge"></i> Professor:
        </label>
        <select id="nomeProfessor" class="form-select" required aria-required="true">
          <option value="">Selecione um professor</option>
          <!-- Os professores serão carregados aqui via JavaScript -->
        </select>
      </div>

      <!-- Campo para a Data -->
      <div class="form-group">
        <label for="dataAgendamento" class="form-label">
          <i class="bi bi-calendar-event"></i> Data do Agendamento:
        </label>
        <input type="date" id="dataAgendamento" class="form-control" aria-required="true" />
      </div>

      <!-- Botões de Horários -->
      <div class="horarios-container fade-in-element" data-delay="300">
        <button class="btn-custom" onclick="reservar('19:00 às 20:20')">
          <i class="bi bi-clock"></i> 19:00 às 20:20
        </button>
        <button class="btn-custom" onclick="reservar('20:50 às 22:00')">
          <i class="bi bi-clock"></i> 20:50 às 22:00
        </button>
        <button class="btn-custom" onclick="reservar('19:00 às 20:20 e 20:50 às 22:00')">
          <i class="bi bi-clock-fill"></i> Ambos os Horários
        </button>
      </div>
    </div>

    <!-- Status de Disponibilidade será inserido aqui via JavaScript -->

    <!-- Ferramentas do Laboratório será inserido aqui via JavaScript -->

    <!-- Botões de Ação -->
    <div class="buttons-container fade-in-element" data-delay="500">
      <!-- Botão para cancelar os agendamentos -->
      <button id="cancelButton" class="btn-cancel d-none" onclick="abrirModalCancelamento()">
        <i class="bi bi-x-circle"></i> Cancelar Agendamentos
      </button>

      <!-- Botão para voltar -->
      <button class="btn-custom" onclick="window.location.href='sejaBemVindo.html';">
        <i class="bi bi-arrow-left"></i> Voltar
      </button>
    </div>
  </div>
</main>

<!-- Modal de Cancelamento -->
<div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="cancelModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cancelModalLabel">
          <i class="bi bi-calendar-x me-2"></i> Cancelar Agendamentos
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Lista de agendamentos com checkboxes será inserida aqui -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" onclick="cancelarAgendamentosSelecionados()">
          <i class="bi bi-trash me-2"></i> Cancelar Selecionados
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="bi bi-x me-2"></i> Fechar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Confirmação para Novo Agendamento -->
<div class="modal fade modal-confirm" id="confirmAgendamentoModal" tabindex="-1"
     aria-labelledby="confirmAgendamentoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmAgendamentoModalLabel">
          <i class="bi bi-question-circle me-2"></i> Realizar outro agendamento?
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" id="btnSim">
          <i class="bi bi-check-circle me-2"></i> Sim
        </button>
        <button type="button" class="btn btn-danger" onclick="window.location.href='sejaBemVindo.html';">
          <i class="bi bi-x-circle me-2"></i> Não
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Custom JavaScript -->
<script th:src="@{/js/agendamento_lab.js}"></script>
</body>

</html>