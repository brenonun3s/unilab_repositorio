<!DOCTYPE html>
<html lang="pt-BR" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agendamento - Laboratório</title>
  <!-- Bootstrap CSS -->
  <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link th:href="@{/font/bootstrap-icons.min.css}" rel="stylesheet" />
  <!-- Google Fonts -->
  <link
          href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
          rel="stylesheet"
  />
  <!-- Variáveis CSS -->
  <link th:href="@{/css/variables.css}" rel="stylesheet" />
  <!-- Estilos -->
  <link th:href="@{/css/agendamento_lab.css}" rel="stylesheet" />
  <!-- Favicon -->
  <link th:href="@{/favicon/favicon.ico}" rel="shortcut icon" type="image/x-icon" />
  <!-- Bootstrap JS -->
  <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
  <!-- Scripts da aplicação -->
  <script th:src="@{/js/verificarAcesso.js}"></script>
  <script th:src="@{/js/agendamento_lab.js}"></script>
</head>

<body>
<div class="login-container">
  <div class="login-title">
    <button
            class="btn btn-voltar"
            th:onclick="window.location.href='@{/administrador/seja-bem-vindo}'"
    >
      <i class="bi bi-arrow-left"></i>
    </button>
    <span>Agendamento: Laboratório</span>
  </div>
  <!-- Informações do Laboratório -->
  <div class="lab-details-container">
    <h3 class="lab-details-title">
      <i class="bi bi-info-circle"></i> Informações do Laboratório
    </h3>
    <div class="lab-details-grid">
      <div class="lab-detail-item">
        <i class="bi bi-geo-alt"></i>
        <div class="detail-content">
          <span class="detail-label">Localização:</span>
          <span class="detail-value" th:text="${labLocalizacao}">Carregando...</span>
        </div>
      </div>
      <div class="lab-detail-item">
        <i class="bi bi-pc-display"></i>
        <div class="detail-content">
          <span class="detail-label">Tipo:</span>
          <span class="detail-value" th:text="${labTipo}">Carregando...</span>
        </div>
      </div>
      <div class="lab-detail-item">
        <i class="bi bi-people"></i>
        <div class="detail-content">
          <span class="detail-label">Capacidade:</span>
          <span class="detail-value" th:text="${labCapacidade}">Carregando...</span>
        </div>
      </div>
      <div class="lab-detail-item">
        <i class="bi bi-circle-fill status-icon"></i>
        <div class="detail-content">
          <span class="detail-label">Status:</span>
          <span class="detail-value" th:text="${labStatus}">Carregando...</span>
        </div>
      </div>
    </div>
  </div>
  <!-- Campo para o Nome do Professor -->
  <div class="form-group mb-3">
    <label for="nomeProfessor" class="form-label">Professor:</label>
    <select id="nomeProfessor" class="form-select" required th:each="professor : ${professores}">
      <option th:value="${professor.id}" th:text="${professor.nome}">Selecione um professor</option>
    </select>
  </div>
  <!-- Campo para a Data -->
  <div class="form-group mb-3">
    <label for="dataAgendamento" class="form-label">Data do Agendamento:</label>
    <input type="date" id="dataAgendamento" class="form-control" />
  </div>
  <!-- Botões de Horários -->
  <div class="horarios-container">
    <button class="btn btn-custom" th:onclick="'reservar(19:00 às 20:20)'">
      <i class="bi bi-clock"></i> 19:00 às 20:20
    </button>
    <button class="btn btn-custom" th:onclick="'reservar(20:50 às 22:00)'">
      <i class="bi bi-clock"></i> 20:50 às 22:00
    </button>
    <button class="btn btn-custom" th:onclick="'reservar(19:00 às 20:20 e 20:50 às 22:00)'">
      <i class="bi bi-clock-fill"></i> Ambos os Horários
    </button>
  </div>

  <!-- Status de Disponibilidade -->
  <div class="status-container">
    <h3 class="status-title">Status do Laboratório</h3>
    <ul id="statusList" class="status-list" th:each="status : ${statusLaboratorio}">
      <li th:text="${status}"></li>
    </ul>
  </div>

  <!-- Ferramentas do Laboratório -->
  <div class="lab-info">
    <h3 class="ferramentas-titulo">Ferramentas Disponíveis</h3>
    <div class="ferramentas-grid" id="ferramentasGrid" th:each="ferramenta : ${ferramentas}">
      <div class="ferramenta-item" th:text="${ferramenta}"></div>
    </div>
  </div>

  <!-- Botão para cancelar os agendamentos -->
  <button id="cancelButton" class="btn btn-cancel d-none" onclick="abrirModalCancelamento()">
    <i class="bi bi-x-circle"></i> Cancelar Agendamentos
  </button>

  <!-- Botão para voltar -->
  <button class="btn btn-custom mt-3" th:onclick="window.location.href='@{/administrador/seja-bem-vindo}'">
    <i class="bi bi-arrow-left"></i> Voltar
  </button>
</div>

<!-- Modal de Cancelamento -->
<div class="modal fade" id="cancelModal" tabindex="-1" aria-labelledby="cancelModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cancelModalLabel">
          <i class="bi bi-calendar-x"></i> Cancelar Agendamentos
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body" id="modalBody" th:each="agendamento : ${agendamentos}">
        <div>
          <input type="checkbox" th:value="${agendamento.id}" />
          <span th:text="${agendamento.descricao}"></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-cancel" onclick="cancelarAgendamentosSelecionados()">
          <i class="bi bi-trash"></i> Cancelar Selecionados
        </button>
        <button type="button" class="btn btn-custom" data-bs-dismiss="modal">
          <i class="bi bi-x"></i> Fechar
        </button>
      </div>
    </div>
  </div>
</div>
</body>
</html>
